## Find source and headers
FILE(GLOB_RECURSE HEADERS *.h)
FILE(GLOB_RECURSE SOURCES *.c*)

IF(CMAKE_HAS_SORT)
  LIST(SORT HEADERS)
  LIST(SORT SOURCES)
ENDIF(CMAKE_HAS_SORT)

## Build
IF(DEBUG AND CYGWIN)
  ADD_DEFINITIONS(-DIL_STATIC_LIB -DIL_NO_UTX)
ELSE(DEBUG AND CYGWIN)
  ADD_DEFINITIONS(-DIL_STATIC_LIB)
ENDIF(DEBUG AND CYGWIN)

INCLUDE_DIRECTORIES(
  ${DEVIL_INCLUDE_DIR}
  ${PNG_INCLUDE_DIR}
  ${JPEG_INCLUDE_DIR}
  ${ZLIB_INCLUDE_DIR}
  src-IL/include/
  src-ILU/include/
)

ADD_LIBRARY(devil ${SOURCES} ${HEADERS})

TARGET_LINK_LIBRARIES(devil ${PNG_LIBRARIES} ${JPEG_LIBRARIES} ${ZLIB_LIBRARIES})